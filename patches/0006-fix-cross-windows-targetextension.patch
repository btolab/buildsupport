From 6e6a1cc0f2957afb57507b1b7bcbc1dc83f4dc52 Mon Sep 17 00:00:00 2001
From: Jeffrey Clark <dude@zaplabs.com>
Date: Tue, 3 Nov 2015 00:29:49 -0600
Subject: [PATCH 06/12] fix cross windows targetextension

Signed-off-by: Jeffrey Clark <dude@zaplabs.com>
---
 scripts/src/osd/sdl.lua |  5 ++++
 scripts/src/tools.lua   | 80 +++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 85 insertions(+)

diff --git a/scripts/src/osd/sdl.lua b/scripts/src/osd/sdl.lua
index 8ac53f3..edac636 100644
--- a/scripts/src/osd/sdl.lua
+++ b/scripts/src/osd/sdl.lua
@@ -566,6 +566,11 @@ if _OPTIONS["with-tools"] then
 			}
 		end
 
+		configuration { "mingw*" or "vs*" }
+			targetextension ".exe"
+
+		configuration { }
+
 		strip()
 end
 
diff --git a/scripts/src/tools.lua b/scripts/src/tools.lua
index c3ed265..421f5cc 100644
--- a/scripts/src/tools.lua
+++ b/scripts/src/tools.lua
@@ -50,6 +50,11 @@ files {
 	MAME_DIR .. "src/tools/romcmp.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -106,6 +111,11 @@ files {
 	MAME_DIR .. "src/version.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -149,6 +159,11 @@ files {
 	MAME_DIR .. "src/tools/jedutil.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -207,6 +222,11 @@ files {
 	MAME_DIR .. "src/emu/emucore.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -262,6 +282,11 @@ files {
 	MAME_DIR .. "src/tools/ldresample.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -317,6 +342,11 @@ files {
 	MAME_DIR .. "src/tools/ldverify.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -360,6 +390,11 @@ files {
 	MAME_DIR .. "src/tools/regrep.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -403,6 +438,11 @@ files {
 	MAME_DIR .. "src/tools/srcclean.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -446,6 +486,11 @@ files {
 	MAME_DIR .. "src/tools/src2html.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -500,6 +545,11 @@ files {
 	MAME_DIR .. "src/tools/split.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -543,6 +593,11 @@ files {
 	MAME_DIR .. "src/tools/pngcmp.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -599,6 +654,11 @@ files {
 	MAME_DIR .. "src/lib/netlist/prg/nltool.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -633,6 +693,11 @@ files {
   MAME_DIR .. "src/lib/netlist/prg/nlwav.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -689,6 +754,11 @@ files {
 	MAME_DIR .. "src/tools/castool.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -746,6 +816,11 @@ files {
 	MAME_DIR .. "src/tools/floptool.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
 
 --------------------------------------------------
@@ -852,4 +927,9 @@ files {
 	MAME_DIR .. "src/tools/imgtool/modules/hp48.cpp",
 }
 
+configuration { "mingw*" or "vs*" }
+	targetextension ".exe"
+
+configuration { }
+
 strip()
-- 
2.4.3

