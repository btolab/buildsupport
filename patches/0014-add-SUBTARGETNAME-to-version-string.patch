From f82b7c3027ba9ca1dc6652d9b7730dcf8f1d6923 Mon Sep 17 00:00:00 2001
From: Jeffrey Clark <dude@zaplabs.com>
Date: Sun, 3 Apr 2016 16:45:34 +0000
Subject: [PATCH 14/17] add SUBTARGETNAME to version string

---
 scripts/genie.lua | 3 +++
 src/version.cpp   | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/scripts/genie.lua b/scripts/genie.lua
index 12c23b0..2d39fc8 100644
--- a/scripts/genie.lua
+++ b/scripts/genie.lua
@@ -1292,6 +1292,9 @@ configuration { "winphone8* or winstore8*" }
 
 
 configuration { }
+	defines {
+		"SUBTARGETNAME='\"" .. _OPTIONS["subtarget"] .. "\"'"
+	}
 
 if (_OPTIONS["SOURCES"] ~= nil) then
 	OUT_STR = os.outputof( PYTHON .. " " .. MAME_DIR .. "scripts/build/makedep.py " .. MAME_DIR .. " " .. _OPTIONS["SOURCES"] .. " target " .. _OPTIONS["subtarget"])
diff --git a/src/version.cpp b/src/version.cpp
index 75859a6..ba97fb1 100644
--- a/src/version.cpp
+++ b/src/version.cpp
@@ -13,4 +13,4 @@
 extern const char bare_build_version[];
 extern const char build_version[];
 const char bare_build_version[] = BARE_BUILD_VERSION;
-const char build_version[] = BARE_BUILD_VERSION " (" __DATE__")";
+const char build_version[] = BARE_BUILD_VERSION " (" SUBTARGETNAME " " __DATE__")";
-- 
2.8.0

