From 4391c3e8c66fc5b1ec42c744a747f4bb11ccf15c Mon Sep 17 00:00:00 2001
From: Jeffrey Clark <dude@zaplabs.com>
Date: Mon, 2 Nov 2015 20:41:18 -0600
Subject: [PATCH 7/12] genie make targets for packager scripts

Signed-off-by: Jeffrey Clark <dude@zaplabs.com>
---
 makefile | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

diff --git a/makefile b/makefile
index de44dbd..23692a0 100644
--- a/makefile
+++ b/makefile
@@ -1169,10 +1169,13 @@ $(GENIE): $(GENIE_SRC)
 
 3rdparty/genie/src/hosts/%.c:
 
-clean:
+.PHONY: genieclean
+genieclean:
+	$(SILENT) $(MAKE) $(MAKEPARAMS) -C 3rdparty/genie/build/gmake.$(GENIEOS) -f genie.make clean
+
+clean: genieclean
 	@echo Cleaning...
 	-@rm -rf $(BUILDDIR)
-	$(SILENT) $(MAKE) $(MAKEPARAMS) -C 3rdparty/genie/build/gmake.$(GENIEOS) -f genie.make clean
 
 GEN_FOLDERS := $(GENDIR)/$(TARGET)/layout/ $(GENDIR)/$(TARGET)/$(SUBTARGET)/
 
@@ -1189,8 +1192,10 @@ endif
 $(GEN_FOLDERS):
 	-$(call MKDIR,$@)
 
+genie: $(GENIE)
+
 generate: \
-		$(GENIE) \
+		genie \
 		$(GEN_FOLDERS) \
 		$(patsubst $(SRC)/%.lay,$(GENDIR)/%.lh,$(LAYOUTS))
 
-- 
2.4.3

